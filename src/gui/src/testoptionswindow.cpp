#include <QtWidgets/QMessageBox>
#include <QtWidgets/QFileDialog>
#include "../include/testoptionswindow.hpp"
#include "ui_testoptionswindow.h"

TestOptionsWindow::TestOptionsWindow(QWidget *parent) :
        QDialog(parent),
        ui(new Ui::TestOptionsWindow)
{
    ui->setupUi(this);

    ui->labelsTextEdit->setReadOnly(true);
    ui->directoryTextEdit->setReadOnly(true);
}

TestOptionsWindow::~TestOptionsWindow()
{
    delete ui;
}

void TestOptionsWindow::on_cancelPushButton_clicked()
{
    reject();
}

void TestOptionsWindow::on_confirmPushButton_clicked()
{
    if (!isValid()) {
        QMessageBox box;
        box.setWindowTitle("Uwaga!");
        box.setText("UzupeÅ‚nij wymagane pola.");
        box.exec();

        return;
    }

    accept();
}

void TestOptionsWindow::on_selectRootDirPushButton_clicked()
{
    _directoryPath = QFileDialog::getExistingDirectory(nullptr, tr("Wybierz folder z danymi"), "/home/pp/CLionProjects/thesis", QFileDialog::ShowDirsOnly | QFileDialog::DontResolveSymlinks);

    ui->directoryTextEdit->setText(_directoryPath);
}

void TestOptionsWindow::on_selectLabelsPushButton_clicked()
{
    _labelsPath = QFileDialog::getOpenFileName(nullptr, tr("Wybierz plik z etykietami"), "/home/pp/CLionProjects/thesis", tr("Plik CSV (*.csv)"));

    ui->labelsTextEdit->setText(_labelsPath);
}

bool TestOptionsWindow::isValid()
{
    return !_labelsPath.isEmpty() && !_directoryPath.isEmpty();
}