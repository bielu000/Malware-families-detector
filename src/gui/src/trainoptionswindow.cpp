#include <QtWidgets/QFileDialog>
#include <QtWidgets/QMessageBox>
#include "../include/trainoptionswindow.hpp"
#include "ui_trainoptionswindow.h"

TrainOptionsWindow::TrainOptionsWindow(QWidget *parent) :
    QDialog(parent),
    ui(new Ui::TrainOptionsWindow)
{
    ui->setupUi(this);

    ui->labelsTextEdit->setReadOnly(true);
    ui->directoryTextEdit->setReadOnly(true);
}

TrainOptionsWindow::~TrainOptionsWindow()
{
    delete ui;
}

void TrainOptionsWindow::on_cancelPushButton_clicked()
{
    reject();
}

void TrainOptionsWindow::on_confirmPushButton_clicked()
{
    if (!isValid()) {
        QMessageBox box;
        box.setWindowTitle("Uwaga!");
        box.setText("UzupeÅ‚nij wymagane pola.");
        box.exec();

        return;
    }

    accept();
}

void TrainOptionsWindow::on_selectRootDirPushButton_clicked()
{
    _directoryPath = QFileDialog::getExistingDirectory(nullptr, tr("Wybierz folder z danymi"), "/home/pp/CLionProjects/thesis", QFileDialog::ShowDirsOnly | QFileDialog::DontResolveSymlinks);

    ui->directoryTextEdit->setText(_directoryPath);
}

void TrainOptionsWindow::on_selectLabelsPushButton_clicked()
{
    _labelsPath = QFileDialog::getOpenFileName(nullptr, tr("Wybierz plik z etykietami"), "/home/pp/CLionProjects/thesis", tr("Plik CSV (*.csv)"));

    ui->labelsTextEdit->setText(_labelsPath);
}

bool TrainOptionsWindow::isValid()
{
    return !_labelsPath.isEmpty() && !_directoryPath.isEmpty();
}